!function(e,t){var a=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};a()&&e.error("jquery-ujs has already been loaded!");var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var a=e('meta[name="csrf-token"]').attr("content");a&&t.setRequestHeader("X-CSRF-Token",a)},fire:function(t,a,n){var r=e.Event(a);return t.trigger(r,n),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(a){var r,i,o,l,u,d,s,c;if(n.fire(a,"ajax:before")){if(l=a.data("cross-domain"),u=l===t?null:l,d=a.data("with-credentials")||null,s=a.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,a.is("form")){r=a.attr("method"),i=a.attr("action"),o=a.serializeArray();var m=a.data("ujs:submit-button");m&&(o.push(m),a.data("ujs:submit-button",null))}else a.is(n.inputChangeSelector)?(r=a.data("method"),i=a.data("url"),o=a.serialize(),a.data("params")&&(o=o+"&"+a.data("params"))):(r=a.data("method"),i=n.href(a),o=a.data("params")||null);c={type:r||"GET",data:o,dataType:s,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(a,"ajax:beforeSend",[e,r])},success:function(e,t,n){a.trigger("ajax:success",[e,t,n])},complete:function(e,t){a.trigger("ajax:complete",[e,t])},error:function(e,t,n){a.trigger("ajax:error",[e,t,n])},xhrFields:{withCredentials:d},crossDomain:u},i&&(c.url=i);var f=n.ajax(c);return a.trigger("ajax:send",f),f}return!1},handleMethod:function(a){var r=n.href(a),i=a.data("method"),o=a.attr("target"),l=e("meta[name=csrf-token]").attr("content"),u=e("meta[name=csrf-param]").attr("content"),d=e('<form method="post" action="'+r+'"></form>'),s='<input name="_method" value="'+i+'" type="hidden" />';u!==t&&l!==t&&(s+='<input name="'+u+'" value="'+l+'" type="hidden" />'),o&&d.attr("target",o),d.hide().append(s).appendTo("body"),d.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),a=t.is("button")?"html":"val";t.data("ujs:enable-with",t[a]()),t[a](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),a=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[a](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,a=e.data("confirm"),r=!1;return a?(n.fire(e,"confirm")&&(r=n.confirm(a),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,a,n){var r,i,o=e(),l=a||"input,textarea",u=t.find(l);return u.each(function(){if(r=e(this),i=r.is(":checkbox,:radio")?r.is(":checked"):r.val(),!i==!n){if(r.is(":radio")&&u.filter('input:radio:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(a,n){var r=a.data("events"),i=!0;return r!==t&&r.submit!==t&&e.each(r.submit,function(e,t){return"function"==typeof t.handler?i=t.handler(n):void 0}),i},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},n.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,a){e.crossDomain||n.CSRFProtection(a)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(a){var r=e(this),i=r.data("method"),o=r.data("params");if(!n.allowAction(r))return n.stopEverything(a);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(!(!a.metaKey&&!a.ctrlKey||i&&"GET"!==i||o))return!0;var l=n.handleRemote(r);return l===!1?n.enableElement(r):l.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var a=e(this);return n.allowAction(a)?(n.handleRemote(a),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(a){var r=e(this),i=r.data("remote")!==t,o=n.blankInputs(r,n.requiredInputSelector),l=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(a);if(o&&r.attr("novalidate")==t&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(a);if(i){if(l){setTimeout(function(){n.disableFormElements(r)},13);var u=n.fire(r,"ajax:aborted:file",[l]);return u||setTimeout(function(){n.enableFormElements(r)},13),u}return!e.support.submitBubbles&&e().jquery<"1.7"&&n.callFormSubmitBindings(r,a)===!1?n.stopEverything(a):(n.handleRemote(r),!1)}setTimeout(function(){n.disableFormElements(r)},13)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var a=e(this);if(!n.allowAction(a))return n.stopEverything(t);var r=a.attr("name"),i=r?{name:r,value:a.val()}:null;a.closest("form").data("ujs:submit-button",i)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery);